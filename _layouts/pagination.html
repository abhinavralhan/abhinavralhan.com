---
layout: default
---

<style>
  .wrapper > header {
    padding-top: 50px;
  }

  /* Sidebar navigation links */
  .sidebar-nav {
    margin-bottom: 30px;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
  .sidebar-nav a {
    color: #0066cc;
    text-decoration: none;
    font-weight: 600;
    font-size: 13px;
    padding: 8px 14px;
    border: 2px solid #0066cc;
    border-radius: 6px;
    text-align: center;
    transition: all 0.3s;
  }
  .sidebar-nav a:hover {
    background: #0066cc;
    color: white;
  }

  /* Mobile responsive styles */
  @media (max-width: 768px) {
    .wrapper {
      flex-direction: column !important;
    }
    .wrapper > header {
      width: 100% !important;
      max-width: 100% !important;
      padding: 20px !important;
      float: none !important;
      position: relative !important;
    }
    .wrapper > section {
      width: 100% !important;
      max-width: 100% !important;
      padding: 20px !important;
      float: none !important;
      border-left: none !important;
      margin-left: 0 !important;
    }
    .sidebar-nav {
      flex-direction: row;
      flex-wrap: wrap;
      justify-content: center;
    }
    .sidebar-nav a {
      font-size: 12px;
      padding: 6px 10px;
    }
    #search-input {
      font-size: 16px !important;
      padding: 12px !important;
    }
    .post-card {
      padding: 20px !important;
    }
    .post-card h3 {
      font-size: 1.1rem !important;
    }
  }
</style>

<!-- Sidebar navigation (added via JavaScript) -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  const header = document.querySelector('.wrapper > header');
  if (header) {
    const navDiv = document.createElement('div');
    navDiv.className = 'sidebar-nav';
    navDiv.innerHTML = `
      <a href="/">Home</a>
      <a href="/projects/">Projects</a>
      <a href="https://linktr.ee/abhinavr8">Useful Links</a>
      <a href="https://buymeacoffee.com/abhinavr8">Buy me a coffee!</a>
      <a href="mailto:abhinavralhan1@gmail.com">Contact</a>
    `;
    // Insert at the beginning of header (above name)
    header.insertBefore(navDiv, header.firstChild);
  }
});
</script>

<div style="max-width: 1000px; margin: 20px auto 60px; padding: 0 20px;">
  <h2 style="font-size: 2.5rem; text-align: center; margin-bottom: 40px; color: #222;">Blog</h2>

  <input type="text" id="search-input" placeholder="Search postsâ€¦"
         style="width:100%; padding:16px; font-size:18px; border:2px solid #0066cc; border-radius:12px; margin-bottom:40px;">

  <div id="results"></div>
  <p id="no-results" style="text-align:center; color:#888; display:none;">No posts found</p>
</div>

<!-- PAGINATION -->
<div style="text-align:center; margin:100px 0 60px; font-size:1.2rem; font-weight:600;" id="pagination">
  <span style="color:#ccc; margin:0 30px;">Previous</span>
  <span style="color:#666; margin:0 40px;">Page <span id="current-page">{{ page.page_num }}</span> of <span id="total-pages">1</span></span>
  <span style="color:#ccc; margin:0 30px;">Next</span>
</div>

<script>
  const allPosts = [
    {% for post in site.posts %}
    {
      title: {{ post.title | jsonify }},
      url: {{ post.url | relative_url | jsonify }},
      date: {{ post.date | date: "%B %d, %Y" | jsonify }},
      excerpt: {{ post.content | strip_html | truncate: 160 | jsonify }}
    }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ];

  // Get current page number from Jekyll
  const currentPage = {{ page.page_num }};
  const perPage = 3;
  const start = (currentPage - 1) * perPage;
  const end = start + perPage;
  const postsToShow = allPosts.slice(start, end);
  const totalPages = Math.ceil(allPosts.length / perPage);

  // Update pagination display
  const paginationDiv = document.getElementById('pagination');
  let paginationHTML = '';

  // Previous button
  if (currentPage > 1) {
    if (currentPage === 2) {
      paginationHTML += '<a href="/" style="color:#0066cc; margin:0 30px; text-decoration:none;">Previous</a>';
    } else {
      paginationHTML += `<a href="/page/${currentPage - 1}/" style="color:#0066cc; margin:0 30px; text-decoration:none;">Previous</a>`;
    }
  } else {
    paginationHTML += '<span style="color:#ccc; margin:0 30px;">Previous</span>';
  }

  paginationHTML += `<span style="color:#666; margin:0 40px;">Page ${currentPage} of ${totalPages}</span>`;

  // Next button
  if (currentPage < totalPages) {
    paginationHTML += `<a href="/page/${currentPage + 1}/" style="color:#0066cc; margin:0 30px; text-decoration:none;">Next</a>`;
  } else {
    paginationHTML += '<span style="color:#ccc; margin:0 30px;">Next</span>';
  }

  paginationDiv.innerHTML = paginationHTML;

  // Function to display posts in card format
  function displayPosts(posts) {
    const results = document.getElementById('results');
    const noResults = document.getElementById('no-results');

    if (posts.length === 0) {
      noResults.style.display = 'block';
      results.innerHTML = '';
      return;
    }

    noResults.style.display = 'none';
    results.innerHTML = posts.map(p => `
      <div class="post-card" style="background:white; padding:30px; margin-bottom:30px; border-radius:16px; box-shadow:0 6px 20px rgba(0,0,0,0.08); border-left:5px solid #0066cc;">
        <h3 style="margin:0 0 10px 0;"><a href="${p.url}" style="color:#0066cc; text-decoration:none;">${p.title}</a></h3>
        <small style="color:#888;">${p.date}</small>
        <p style="margin:15px 0 0; color:#444; line-height:1.6;">${p.excerpt}...</p>
      </div>
    `).join('');
  }

  // Initial display of paginated posts
  displayPosts(postsToShow);

  // Custom search with card format results
  const searchInput = document.getElementById('search-input');

  searchInput.addEventListener('input', function() {
    const query = this.value.toLowerCase().trim();

    if (query === '') {
      // When search is cleared, show paginated posts again
      displayPosts(postsToShow);
      return;
    }

    // Filter posts based on search query
    const filteredPosts = allPosts.filter(post =>
      post.title.toLowerCase().includes(query) ||
      post.excerpt.toLowerCase().includes(query)
    );

    displayPosts(filteredPosts);
  });
</script>
